## 操作系统

### 概念、定义

操作系统是指控制和管理整个计算机系统的硬件和软件资源，并合理地组织调度计算机的工作和资源的分配；以提供给用户和其它软件方便的接口和环境；它是计算机系统中最基本的系统软件。

- 系统资源的管理者
- 向上层提供方便易用的服务
- 最接近硬件的软件

### 功能和目标

#### 资源的管理者

- **处理机管理：**进程控制(创建进程、撤销进程，状态转换)、进程调度(从就绪队列中调度进程)、进程同步(设置进程同步信息，协调系统进程运行)、进程通信(进程间信息交换)
- **存储器管理：**地址重定位(逻辑地址到物理地址转换)、存储分配(为程序分配空间和回收内存)、存储保护(保护各个程序之间互不侵犯)、存储扩充(建立虚拟存储系统实现内存逻辑的扩充)
- **文件管理：** 目录管理、文件的读写管理和存取控制、文件存储空间管理、软件管理
- **设备管理： **缓冲管理(I/O缓冲区管理)、设备分配、设备处理、**设备独立性和虚拟设备**
- **用户接口： **命令接口、程序接口、图形接口

#### 向上层提供服务

- 普通用户使用的GUI图形界面、命令接口（联机命令接口、脱机命令接口）
- 程序员使用的程序接口（即系统调用）
- 对硬件机器的扩充

### 4个特性

**并发和共享是两个最基本的特性**（互为存在条件）

- **并发：** 指两个或多个事件在**同一时间间隔内(强调时间间隔)**发生。这些事件在宏观上是同时发生的，微观上是交替发生。另一个易混淆的概念是**并行(多个事件同一时刻同时发生-强调时刻)**。 单核CPU同一时刻只能执行一个程序，各个程序只能**并发**执行，多核CPU同一时刻可以同时执行多个程序，多个程序可以**并行**执行。
- **共享： **资源共享，指系统中的资源可供内存中多个并发执行的进程共同使用。又分为互斥共享方式(系统某些资源可以供多个进程访问，但是同一个时间段只允许一个进程访问)和同时共享方式(系统某些资源允许同一个时间段内多个进程同时(宏观意义，微观仍可能是交替进行访问)进行访问)
- **虚拟：** 把一个物理上的实体(实际存在)变成若干个逻辑上的对应物(用户感受上)。虚拟又涉及到空分复用技术(虚拟存储器)和时分复用技术(虚拟处理器-微观上处理机在各个微小时间段内交替为进程服务)
- **异步：** 在多道程序环境下，允许多个进程并发执行，但由于资源有限，进程的执行不是一贯到底的，而是走走停停，以不可预知的速度向前推进。 **只有系统拥有并发性，才可能导致异步性。**(并发的进程会抢占系统资源，但是系统资源有限，所以进程的执行不是一贯到底的，而是走走停停)

### 发展和分类

#### 手工操作阶段

用户独占全机，资源独占导致利用率低，输入输出设备主要是纸带和卡片，CPU会等待用户手工装入纸带或卡片，人工控制程序的执行。CPU等待I/O设备，导致CPU的处理能力浪费。

#### 单道批处理系统

引入了脱机输入/输入技术，计算机上电后运行一个**常驻内存的监控程序**，设立专门操作员，用户将卡带或磁带中的作业交给操作员。操作员将作业分为若干组，称为一批作业，然后安装到输入设备上，监控程序按顺序读入并执行，完成后输出结果并由监控程序自动加载下个作业。**每个作业之间串行执行。**

- **优点：** 缓解了人机速度矛盾，资源利用率有所提升
- **缺点：** 内存中仅有一道程序运行，只有该程序运行结束后才调入下一道程序，CPU大量时间在等待I/O完成，利用率仍然低下。

#### 多道批处理系统

多个作业同时进入主存，将内存分为若干区域，每个分区存放一个用户作业。各作业交替使用CPU，当前作业需要I/O处理时，CPU转去执行另一个作业。**宏观上并发运行，微观上串行运行**。

需要增加的硬件：I/O中断、DMA，需要增加的软件：存储管理、CPU调度、资源竞争控制

- **优点：** 多道程序并发执行，共享计算机资源，资源利用率大幅提高，系统吞吐量大
- **缺点：**用户响应时间长，没有人机交互功能(处理作业时中间不能自己控制作业的执行)，作业平均周转时间长：短作业周转时间显著增长。（周转时间 = 结束时间 - 开始时间）

#### 分时操作系统

计算机以时间片为单位轮流为各个用户/作业服务，各个用户可通过终端与计算机进行交互。如果某作业在分配给它的时间片用完时仍未完成，则该作业就暂时中断，等待下一轮运行，并把处理机的控制权让给另一个作业使用。这样在一个相对较短的时间间隔内，每个用户作业都能得到快速响应，以实现人机交互。

**优点：** 用户请求可以即时响应，解决了人机交互问题。允许多个用户同时使用一台计算机，多个用户对计算机的操作相互独立，缩短了周转时间。

**缺点：** 不能优先处理一些紧急任务，操作系统对每个用户/作业是公平的。

#### 实时操作系统

计算机接到外部信号后能及时处理，并且在严格的时限内处理事件。具有及时性和可靠性，响应时间短。主要功能：实时时钟管理、过载保护、容错能力和冗余备份。

- 硬实时系统：必须在**绝对严格**的规定时间内完成处理（导弹控制、自动驾驶）
- 软实时系统：能接受偶尔违反时间规定（订票系统）

#### 网络操作系统

把网络中的各个计算机有机结合起来，实现数据传送功能，实现网络资源共享和各个计算机之间的通信。

#### 分布式操作系统

具有分布性、并行性、透明性、共享性、健壮性。系统中各台计算机地位相同，大量计算机交织在一起通过网络进行连接。任何工作都可以分布在这些计算机上由它们并行、协同完成任务。在用户眼里就像一台虚拟的单处理机，用户不必关心计算机资源分配和调度问题。

#### 个人操作系统

如我们常见的Windows系统，Mac系统，安卓/IOS。特点：使用方便、响应速度快，支持多种硬件和外部设备，效率不用特别高。

### 小结

设置操作系统的目的就是提高计算机系统的效率，增强系统的处理能力，充分发挥系统的利用率，方便用户使用。因此现代操作系统普遍采用以多道程序设计为基础的并行操作技术。具有并发性、共享性、虚拟性、异步性。为提高系统资源利用率和对软硬件有效管理，提供处理机管理、存储器管理、设备管理、文件管理、用户接口的功能。并了解到各个阶段的操作系统的特点。

